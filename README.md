# STC8-BOOTLOADER-TINY

## 介绍
STC系列单片机一直以“无需下载器、烧录器即可下载烧录”闻名。实现该功能的技巧就是芯片内部固化了一段BootLoader代码。这段代码会在单片机上电的时候运行，因此STC一直都靠“冷启动”来下载。

然而到STC8时代，“冷启动”下载的成功率变低了。这并不是出了什么BUG，而是单片机工作电压范围变宽了。STC以前的5V单片机，只要电压降到3V再恢复5V就能触发BootLoader。现在STC8的工作电压低至1.9V，哪怕是串口IO的倒灌电流都能维持单片机工作，导致其无法“冷启动”。

那为什么不自制一个BootLoader呢？这个项目将会助您实现自己写一个BootLoader的愿望，只要能理解原理就能轻易的应用在产品上！

## 优点
* 不限定通信协议；UART、IIC、SPI都可以，甚至可以自定义协议。
* BOOT独立；即使APP下载中断或者安装中断也不会损坏BOOT固件。
* APP独立；不需要对APP工程做任何设置，不用对APP的BIN文件做任何改动既可以直接下载。只要APP里没有擦除BOOT区的操作就行。
* 多种触发模式；既可以使用一个IO用作BOOT启动脚（经典应用），也可以在APP中通过通信握手判断后跳转到BOOT（自由度更大）。

## 缺点
* 多多少少会占用flash空间，导致可用flash空间减少。
* 开启BOOT引脚时，会占用一个IO。
* 未对传输进行加密，有被窃听的可能。

#### 但这终究是Tiny版，只实现了基本的BootLoader功能。在此基础上可以自由的添加所需的功能组件。

### 参考环境

| KEIL版本  | V9.59.0.0  |
| :------------: | :------------: |
| C Compiler  | V9.59.0.0  |
| Assembler  | V8.2.7.0  |
| Linker  | V6.22.2.0  |
| Librarian  | V4.30.1.0  |
| Hex Converter  | V2.7.0.0  |
| CPU DLL  | V3.122.0.0  |
| Dialog DLL  | V2.66.0.0  |

### 消耗资源

| 优化等级  | 8级  |
| :------------: | :------------: |
| DATA区  | 28字节  |
| XDATA区 | 512字节  |
| FLASH区  | 1375字节  |
